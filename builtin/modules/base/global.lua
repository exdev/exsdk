-- ======================================================================================
-- File         : global.lua
-- Author       : Wu Jie 
-- Last Change  : 02/18/2013 | 17:16:22 PM | Monday,February
-- Description  : 
-- ======================================================================================

--/////////////////////////////////////////////////////////////////////////////
-- base functions
--/////////////////////////////////////////////////////////////////////////////

-- -- ------------------------------------------------------------------ 
-- -- Desc: 
-- -- ------------------------------------------------------------------ 

-- DISABLE: if use this, the callback stack will show only here
-- local builtinAssert = assert
-- function assert ( exp, msg, ... )
--     builtinAssert ( exp,  msg:format(...)  )
-- end

-- ------------------------------------------------------------------ 
-- Desc: 
-- ------------------------------------------------------------------ 

local builtinError = error
function error ( msg, ... )
    builtinError( msg:format(...) )
    print( debug.traceback() )
end

-- ------------------------------------------------------------------ 
-- Desc: 
-- ------------------------------------------------------------------ 

function printf ( msg, ... ) 
    print ( msg:format(...) )
end

-- ------------------------------------------------------------------ 
-- Desc: 
-- ------------------------------------------------------------------ 

function checkarg ( arg, tpname )
    assert ( typename(arg) == tpname, 
             string.format("Type error: must be %s, this is %s", tpname, typename(arg) ) )
end

-- ------------------------------------------------------------------ 
-- Desc: 
-- ------------------------------------------------------------------ 

function TODO ( ... )
    assert ( false, ... )
end
